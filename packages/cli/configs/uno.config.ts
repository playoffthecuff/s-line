import { defineConfig, presetWind4 } from "unocss";

export default defineConfig({
	presets: [presetWind4({ dark: "class", preflights: { reset: true } })],
	rules: [
		[/^shadow-(d|l)-(\d+)d$/, ([_, theme, value]) => ({'box-shadow': `calc(var(--spacing-size) * ${2 ** (0.25 * +value)}rem) calc(var(--spacing-size) * ${2 ** (0.25 * +value)}rem) calc(var(--spacing-size) * ${2 * 2 ** (0.25 * +value)}rem) calc(var(--spacing-size) * ${0.5 * 2 ** (0.25 * +value)}rem) oklch(from var(${theme === "d" ? '--colors-neutral-1000' : '--colors-neutral-450'}) l c h / 0.5)`})],
		[/^m(x|y|t|r|b|l|s|e)?-(\d+)d$/, ([_, side, value]) => ({[`margin${side ? `-${{"x":"inline","y":"block","t":"top","b":"bottom","l":"left","r":"right","s":"inline-start","e":"inline-end"}[side]}` : ''}`]: `calc(var(--spacing-size) * ${2 ** (0.25 * +value)}rem)`})],
		[/^p(x|y|t|r|b|l|s|e)?-(\d+)d$/, ([_, side, value]) => ({[`padding${side ? `-${{"x":"inline","y":"block","t":"top","b":"bottom","l":"left","r":"right","s":"inline-start","e":"inline-end"}[side]}` : ''}`]: `calc(var(--spacing-size) * ${2 ** (0.25 * +value)}rem)`})],
		[/^gap(?:-(x|y))?-(\d+)d$/, ([_, side, value]) => ({[`${side ? `-${{"x":"column","y":"row"}[side]}` : ''}gap`]: `calc(var(--spacing-size) * ${2 ** (0.25 * +value)}rem)`})],
		[/^rounded(?:-(bl|br|tl|tr|es|ee|se|ss))?-(\d+)d$/, ([_, side, value]) => ({[`${side ? {"bl":"border-bottom-left-radius","br":"border-bottom-right-radius","tl":"border-top-left-radius","tr":"border-top-right-radius","es":"border-end-start-radius","ee":"border-end-end-radius","se":"border-start-end-radius","ss":"border-start-start-radius"}[side] : 'border-radius'}`]: `calc(var(--spacing-size) * var(--radius) * ${2 ** (0.25 * +value)}rem)`})],
		[/^rounded-(s|e|t|r|b|l)-(\d+)d$/, ([_, side, value]) => ({[`${{"s":["border-start-start-radius","border-end-start-radius"],"e":["border-start-end-radius","border-end-end-radius"],"t":["border-top-left-radius","border-top-right-radius"],"r":["border-top-right-radius","border-bottom-right-radius"],"b":["border-bottom-right-radius","border-bottom-left-radius"],"l":["border-top-left-radius","border-bottom-left-radius"]}[side]?.[0]}`]: `calc(var(--spacing-size) * var(--radius) * ${2 ** (0.25 * +value)}rem)`,[`${{"s":["border-start-start-radius","border-end-start-radius"],"e":["border-start-end-radius","border-end-end-radius"],"t":["border-top-left-radius","border-top-right-radius"],"r":["border-top-right-radius","border-bottom-right-radius"],"b":["border-bottom-right-radius","border-bottom-left-radius"],"l":["border-top-left-radius","border-bottom-left-radius"]}[side]?.[1]}`]: `calc(var(--spacing-size) * var(--radius) * ${2 ** (0.25 * +value)}rem)`})],
		[/^top-(\d+)d$/, ([_, value]) => ({top: `calc(var(--spacing-size) * ${2 ** (0.25 * +value)}rem)`})],
		[/^bottom-(\d+)d$/, ([_, value]) => ({bottom: `calc(var(--spacing-size) * ${2 ** (0.25 * +value)}rem)`})],
		[/^left-(\d+)d$/, ([_, value]) => ({left: `calc(var(--spacing-size) * ${2 ** (0.25 * +value)}rem)`})],
		[/^right-(\d+)d$/, ([_, value]) => ({right: `calc(var(--spacing-size) * ${2 ** (0.25 * +value)}rem)`})],
		[/^w-(\d+)d$/, ([_, value]) => ({width: `calc(var(--spacing-size) * ${2 ** (0.25 * +value)}rem)`})],
		[/^h-(\d+)d$/, ([_, value]) => ({height: `calc(var(--spacing-size) * ${2 ** (0.25 * +value)}rem)`})],
		[/^min-w-(\d+)d$/, ([_, value]) => ({'min-width': `calc(var(--spacing-size) * ${2 ** (0.25 * +value)}rem)`})],
		[/^min-h-(\d+)d$/, ([_, value]) => ({'min-height': `calc(var(--spacing-size) * ${2 ** (0.25 * +value)}rem)`})],
		[/^max-w-(\d+)d$/, ([_, value]) => ({'max-width': `calc(var(--spacing-size) * ${2 ** (0.25 * +value)}rem)`})],
		[/^max-h-(\d+)d$/, ([_, value]) => ({'max-height': `calc(var(--spacing-size) * ${2 ** (0.25 * +value)}rem)`})],
		[/^size-(\d+)d$/, ([_, value]) => ({width: `calc(var(--spacing-size) * ${2 ** (0.25 * +value)}rem)`, height: `calc(var(--spacing-size) * ${2 ** (0.25 * +value)}rem)`})],
		[/^text-(\d+)d$/, ([_, value]) => ({'font-size': `calc(var(--spacing-size) * var(--text-size) * 8 * ${2 ** (0.25 * +value)}rem)`, 'line-height': `${+value < 6 ? 2 ** (0.0625 * (+value + 5)) : +value < 11 ? 2 ** 0.625 / 2 ** (0.125 * (+value - 5)) : 1}`})],
		[/^font-(\d+)d$/, ([_, value]) => ({'font-weight': `${Math.min(1000, 100 * 2 ** (0.25 * +value))}`})],
	],
	shortcuts: [
		{
			"bg-primary": "bg-primary-600",
			"bg-neutral": "bg-neutral-150 dark:bg-neutral-600",
			"bg-neutral-1": "bg-neutral-100 dark:bg-neutral-650",
			"bg-neutral-2": "bg-neutral-50 dark:bg-neutral-700",
			"bg-neutral-3": "bg-neutral-0 dark:bg-neutral-750",
			"bg-neutral-fg": "bg-neutral-750 dark:bg-neutral-300",
			"bg-neutral-fg-1": "bg-neutral-800 dark:bg-neutral-250",
			"bg-neutral-fg-2": "bg-neutral-850 dark:bg-neutral-200",
			"bg-neutral-fg-3": "bg-neutral-900 dark:bg-neutral-150",
			"text-neutral": "text-neutral-950 dark:text-neutral-150",
			"text-neutral-bg": "text-neutral-50 dark:text-neutral-850",
			"border-neutral": "border-neutral-350 dark:border-neutral-550",
			"outline-neutral-fg": "outline-neutral-950  dark:outline-neutral-150",
			"outline-neutral": "outline-neutral-600  dark:outline-neutral-300",
			"outline-primary": "outline-primary-600  dark:outline-primary-300",
		},
		[/^shadow-(\d+)d$/, ([_, value]) => `shadow-l-${value}d dark:shadow-d-${value}d`],
	],
	extendTheme: (theme) => ({
		...theme,
		colors: {
			"neutral-0": "oklch(1 0 142)",
			"neutral-50": "oklch(0.98 0.004 142.1)",
			"neutral-100": "oklch(0.947 0.005 142.26)",
			"neutral-150": "oklch(0.907 0.006 142.47)",
			"neutral-200": "oklch(0.861 0.007 142.7)",
			"neutral-250": "oklch(0.81 0.007 142.95)",
			"neutral-300": "oklch(0.755 0.007 143.23)",
			"neutral-350": "oklch(0.696 0.006 143.52)",
			"neutral-400": "oklch(0.634 0.006 143.83)",
			"neutral-450": "oklch(0.568 0.006 144.16)",
			"neutral-500": "oklch(0.5 0.006 144.5)",
			"neutral-550": "oklch(0.432 0.006 144.84)",
			"neutral-600": "oklch(0.366 0.005 145.17)",
			"neutral-650": "oklch(0.304 0.005 145.48)",
			"neutral-700": "oklch(0.245 0.005 145.77)",
			"neutral-750": "oklch(0.19 0.005 146.05)",
			"neutral-800": "oklch(0.139 0.004 146.31)",
			"neutral-850": "oklch(0.093 0.004 146.53)",
			"neutral-900": "oklch(0.053 0.003 146.74)",
			"neutral-950": "oklch(0.02 0.002 146.9)",
			"neutral-1000": "oklch(0 0 147)",
			"success-50": "oklch(0.98 0.035 141.39)",
			"success-100": "oklch(0.947 0.098 140.39)",
			"success-150": "oklch(0.907 0.188 139.17)",
			"success-200": "oklch(0.861 0.289 137.77)",
			"success-250": "oklch(0.81 0.272 136.21)",
			"success-300": "oklch(0.755 0.253 134.54)",
			"success-350": "oklch(0.696 0.234 132.74)",
			"success-400": "oklch(0.634 0.213 130.85)",
			"success-450": "oklch(0.568 0.191 128.84)",
			"success-500": "oklch(0.5 0.168 126.77)",
			"success-550": "oklch(0.432 0.145 124.7)",
			"success-600": "oklch(0.366 0.123 122.69)",
			"success-650": "oklch(0.304 0.102 120.8)",
			"success-700": "oklch(0.245 0.082 119)",
			"success-750": "oklch(0.19 0.063 117.32)",
			"success-800": "oklch(0.139 0.046 115.77)",
			"success-850": "oklch(0.093 0.031 114.37)",
			"success-900": "oklch(0.053 0.017 113.15)",
			"success-950": "oklch(0.02 0.006 112.14)",
			"warning-50": "oklch(0.98 0.097 109.02)",
			"warning-100": "oklch(0.947 0.206 107.39)",
			"warning-150": "oklch(0.907 0.198 105.43)",
			"warning-200": "oklch(0.861 0.187 103.17)",
			"warning-250": "oklch(0.81 0.176 100.66)",
			"warning-300": "oklch(0.755 0.164 97.95)",
			"warning-350": "oklch(0.696 0.151 95.05)",
			"warning-400": "oklch(0.634 0.138 92.01)",
			"warning-450": "oklch(0.568 0.123 88.76)",
			"warning-500": "oklch(0.5 0.109 85.42)",
			"warning-550": "oklch(0.432 0.094 82.07)",
			"warning-600": "oklch(0.366 0.079 78.83)",
			"warning-650": "oklch(0.304 0.066 75.78)",
			"warning-700": "oklch(0.245 0.053 72.88)",
			"warning-750": "oklch(0.19 0.041 70.18)",
			"warning-800": "oklch(0.139 0.03 67.67)",
			"warning-850": "oklch(0.093 0.02 65.41)",
			"warning-900": "oklch(0.053 0.011 63.44)",
			"warning-950": "oklch(0.02 0.004 61.82)",
			"error-50": "oklch(0.98 0.009 28.93)",
			"error-100": "oklch(0.947 0.026 28.82)",
			"error-150": "oklch(0.907 0.048 28.68)",
			"error-200": "oklch(0.861 0.075 28.52)",
			"error-250": "oklch(0.81 0.107 28.34)",
			"error-300": "oklch(0.755 0.147 28.15)",
			"error-350": "oklch(0.696 0.194 27.94)",
			"error-400": "oklch(0.634 0.251 27.73)",
			"error-450": "oklch(0.568 0.232 27.5)",
			"error-500": "oklch(0.5 0.205 27.26)",
			"error-550": "oklch(0.432 0.177 27.02)",
			"error-600": "oklch(0.366 0.15 26.79)",
			"error-650": "oklch(0.304 0.124 26.58)",
			"error-700": "oklch(0.245 0.1 26.37)",
			"error-750": "oklch(0.19 0.077 26.18)",
			"error-800": "oklch(0.139 0.056 26)",
			"error-850": "oklch(0.093 0.038 25.84)",
			"error-900": "oklch(0.053 0.021 25.7)",
			"error-950": "oklch(0.02 0.008 25.59)",
			"visited-50": "oklch(0.98 0.016 327.98)",
			"visited-100": "oklch(0.947 0.045 327.94)",
			"visited-150": "oklch(0.907 0.082 327.9)",
			"visited-200": "oklch(0.861 0.127 327.85)",
			"visited-250": "oklch(0.81 0.184 327.8)",
			"visited-300": "oklch(0.755 0.251 327.74)",
			"visited-350": "oklch(0.696 0.32 327.67)",
			"visited-400": "oklch(0.634 0.291 327.61)",
			"visited-450": "oklch(0.568 0.261 327.54)",
			"visited-500": "oklch(0.5 0.23 327.46)",
			"visited-550": "oklch(0.432 0.198 327.39)",
			"visited-600": "oklch(0.366 0.168 327.32)",
			"visited-650": "oklch(0.304 0.139 327.25)",
			"visited-700": "oklch(0.245 0.112 327.19)",
			"visited-750": "oklch(0.19 0.087 327.13)",
			"visited-800": "oklch(0.139 0.064 327.07)",
			"visited-850": "oklch(0.093 0.042 327.02)",
			"visited-900": "oklch(0.053 0.024 326.98)",
			"visited-950": "oklch(0.02 0.009 326.95)",
			"primary-50": "oklch(0.98 0.009 263.99)",
			"primary-100": "oklch(0.947 0.025 263.97)",
			"primary-150": "oklch(0.907 0.044 263.94)",
			"primary-200": "oklch(0.861 0.068 263.91)",
			"primary-250": "oklch(0.81 0.094 263.88)",
			"primary-300": "oklch(0.755 0.124 263.85)",
			"primary-350": "oklch(0.696 0.158 263.81)",
			"primary-400": "oklch(0.634 0.195 263.78)",
			"primary-450": "oklch(0.568 0.236 263.74)",
			"primary-500": "oklch(0.5 0.281 263.69)",
			"primary-550": "oklch(0.432 0.25 263.65)",
			"primary-600": "oklch(0.366 0.212 263.61)",
			"primary-650": "oklch(0.304 0.176 263.57)",
			"primary-700": "oklch(0.245 0.142 263.54)",
			"primary-750": "oklch(0.19 0.11 263.5)",
			"primary-800": "oklch(0.139 0.08 263.47)",
			"primary-850": "oklch(0.093 0.053 263.44)",
			"primary-900": "oklch(0.053 0.03 263.42)",
			"primary-950": "oklch(0.02 0.011 263.4)"
}}),
		preflights: [
			{
				getCSS: () => `:root, :host {
					--spacing-size: 0.0625;
					--radius: 1;
					--text-size: 1;
				}`
			}
		]
});